<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bitc.mapper.SoundMapper">
	<select id="selectUserProfile"
		resultType="com.bitc.dto.SoundDto">
		<![CDATA[
			SELECT
				user_pk, user_email, user_pw, user_name,
				user_phone, like_list
			FROM
				users
			WHERE
				admin_yn = 'N'
			ORDER BY
				user_pk DESC
		]]>
	</select>

	<select id="userProfile" parameterType="int"
		resultType="com.bitc.dto.SoundDto">
		<![CDATA[
			SELECT
				user_pk, user_email, user_pw, user_name,
				user_phone, like_list
			FROM
				users
			WHERE
				user_pk = #{user_pk}
		]]>
	</select>

	<select id="selectUserUpload" resultType="com.bitc.dto.SoundDto">
		<![CDATA[
			SELECT
				music_pk, music_category_pk, user_pk, music_title, like_count
			FROM
				music
			WHERE
				user_pk = #{user_pk}
			AND
				privacy = 'Y'
			ORDER BY
				music_pk DESC
		]]>
	</select>

	<select id="selectUserPlaylist"
		resultType="com.bitc.dto.SoundDto">
		<![CDATA[
			SELECT
				user_pk, user_playlist_pk, user_playlist_name, playlist
			FROM
				userplaylist
			WHERE
				user_pk = #{user_pk}
			ORDER BY
				user_playlist_pk DESC
		]]>
	</select>
	
	<select id="selectUserPlaylistDetail"
		resultType="com.bitc.dto.SoundDto">
		<![CDATA[
			SELECT
				d.userplaylist_detail_pk, d.user_playlist_pk, m.music_pk,
				m.music_category_pk, m.user_pk, m.music_title, m.like_count
			FROM
				userplaylist_detail d, music m, userplaylist u
			WHERE
			    d.music_pk = m.music_pk
			AND
				d.user_playlist_pk = #{user_playlist_pk}
			ORDER BY
				d.userplaylist_detail_pk DESC
		]]>
	</select>

</mapper>

<?xml version="1.0" encoding="UTF-8"?>

<!-- Mybatis에 매핑된 sql이라는 것을 알려주기 위한 부분-->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- namsespace : mybatis에 의해서 매핑된 mapper 파일을 지정 -->
<!-- 해당 xml 파일과 mapper파일이 연동됨-->
<!-- mapper interface 파일의 구현체가 된 xml임 -->
<mapper namespace="com.bitc.cjh.mapper.ProductMapper">
	<!-- id : mapper 파일의 메서드명, override 효과
		 resultType : 해당 SQL문이 실행 후 반환할 결과값의 타입을 지정
		 parameterType : 해당 SQL 문이 실행 시 필요한 데이터의 타입
	-->
	
	
	<!--
	
	<insert id="insertProductOption" parameterType="com.bitc.cjh.dto.ProductOptionDto">
		<![CDATA[ 
			INSERT INTO
				t_product_option (option_name, option_price, product_code)
			VALUES
		]]>
		<foreach collection="list" item="item" separator=",">
			(#{item.optionName},
			 #{item.optionPrice},
			 #{item.productCode})
		</foreach>
	</insert>
	
	-->
	
	<update id="updateFileList" parameterType="com.bitc.cjh.dto.FileDto">
		<foreach collection="list" item="item" separator=";">
			UPDATE
				t_file
			SET product_code = #{item.productCode},
				original_file_name = #{item.originalFileName},
				stored_file_path = #{item.storedFilePath},
				file_size = #{item.fileSize}
			WHERE 
				file_idx = #{item.fileIdx}	 
		</foreach>	
	</update>
	
	<insert id="insertFileList" parameterType="com.bitc.cjh.dto.FileDto">
		<![CDATA[ 
			INSERT INTO
				t_file (product_code, original_file_name, stored_file_path, file_size)
			VALUES
		]]>
		<foreach collection="list" item="item" separator=",">
			(#{item.productCode},
			 #{item.originalFileName},
			 #{item.storedFilePath}, 
			 #{item.fileSize})
		</foreach>
	</insert>
	
	
	<!--
	
	<insert id="insertOrder" parameterType="com.bitc.cjh.dto.TransactionDto">
		<![CDATA[ 
			INSERT INTO
				t_order (user_id, user_address, total_price, delivery_fee, product_code, options, payment_method)
			VALUES
		]]>
		<foreach collection="list" item="item" separator=",">
			(#{item.userId},
			 #{item.userAddress},
			 #{item.totalPrice}, 
			 #{item.deliveryFee},
			 #{item.productCode},
			 #{item.options},
			 #{item.paymentMethod})
		</foreach>
	</insert>
	
	-->
	
	
	
</mapper>
